<script>
async function salvarAgendamentoNoGitHub(agendamento) {
    const repo = "SEU_USUARIO/SEU_REPOSITORIO";
    const arquivo = "agendamentos.json";
    const token = "SEU_GITHUB_TOKEN"; // Gere um Token Pessoal no GitHub
    
    const url = `https://api.github.com/repos/${repo}/contents/${arquivo}`;
    
    // Obtém o conteúdo atual do arquivo
    const response = await fetch(url, {
        headers: { Authorization: `token ${token}` },
    });

    let sha = "";
    let conteudoAtual = [];

    if (response.ok) {
        const json = await response.json();
        sha = json.sha;
        conteudoAtual = JSON.parse(atob(json.content));
    }

    // Adiciona o novo agendamento
    conteudoAtual.push(agendamento);

    const novoConteudo = btoa(JSON.stringify(conteudoAtual, null, 2));

    // Atualiza o arquivo no repositório
    await fetch(url, {
        method: "PUT",
        headers: {
            Authorization: `token ${token}`,
            "Content-Type": "application/json",
        },
        body: JSON.stringify({
            message: "Atualizando agendamentos",
            content: novoConteudo,
            sha: sha, // Necessário para modificar o arquivo existente
        }),
    });

    alert("Agendamento salvo no GitHub!");
}
</script>
