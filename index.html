<script>
    document.addEventListener("DOMContentLoaded", function() {
        const timesList = document.getElementById("times-list");
        const availableTimes = [
            "10:00", "11:00", "11:30", "12:00", "13:00", "13:30",
            "14:00", "15:00", "15:30", "16:00", "17:00", "17:30",
            "18:00", "19:00", "20:00"
        ];

        // Cria os botões de horário inicialmente
        availableTimes.forEach(time => {
            let button = document.createElement("button");
            button.className = "horario";
            button.textContent = time;
            button.addEventListener("click", function(event) {
                agendarHorario(event, time, button);
            });
            timesList.appendChild(button);
        });
    });

    function agendarHorario(event, horario, button) {
        event.preventDefault();
        let nome = document.getElementById("name").value.trim();
        let data = document.getElementById("date").value;

        if (nome === "" || data === "") {
            alert("Preencha seu nome e escolha uma data antes de selecionar um horário.");
            return;
        }

        let confirmacao = confirm("Será cobrada uma taxa de R$ 10,00 para agendar. O valor será abatido do corte. Deseja continuar?");
        if (!confirmacao) return;

        let dataFormatada = data.split("-").reverse().join("/");
        let lista = document.getElementById("scheduled-list");
        let item = document.createElement("li");
        item.innerHTML = `${dataFormatada} - ${horario} - ${nome}`;

        let botaoCancelar = document.createElement("button");
        botaoCancelar.textContent = "Cancelar";
        botaoCancelar.className = "cancelar";
        botaoCancelar.addEventListener("click", function() {
            lista.removeChild(item);
            alert(`Agendamento de ${nome} no dia ${dataFormatada} às ${horario} foi cancelado.`);
        });

        item.appendChild(botaoCancelar);
        lista.appendChild(item);

        // Remover o botão do horário selecionado da lista de disponíveis
        button.remove();

        alert(`Horário ${horario} agendado para ${nome} no dia ${dataFormatada}!`);
    }
</script>
